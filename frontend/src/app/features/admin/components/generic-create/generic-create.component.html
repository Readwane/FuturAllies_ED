<mat-card class="generic-create-card">
    <mat-toolbar color="primary" class="generic-create-toolbar">
      <button mat-icon-button (click)="handleBack()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      {{ submitButtonLabel }}
    </mat-toolbar>
  
    <form [formGroup]="form" (ngSubmit)="handleSubmit()" class="generic-create-form">  
      <div class="form-field-container">  
        <div *ngFor="let field of fieldsConfig" class="form-field">  
            <!-- Input Text, Email, Password -->  
            <mat-form-field appearance="outline" *ngIf="['text', 'email', 'password'].includes(field.type)">  
                <mat-label>{{ field.label }}</mat-label>  
                <input  
                    matInput  
                    [type]="field.type"  
                    [formControlName]="field.name"  
                    [placeholder]="field.placeholder || ''"  
                />  
                <mat-error *ngIf="form.get(field.name)?.hasError('required')">
                    {{ errorMessages[field.name] && errorMessages[field.name]['required'] || 'Ce champ est requis' }}
                </mat-error> 
                <mat-error *ngIf="form.get(field.name)?.hasError('email')">
                    {{ errorMessages[field.name] && errorMessages[field.name]['email'] || 'Adresse e-mail invalide' }}
                </mat-error> 
            </mat-form-field>  
  
            <!-- File Upload -->  
            <mat-form-field appearance="outline" *ngIf="field.type === 'file'">  
                <mat-label>{{ field.label }}</mat-label>  
                <input  
                    matInput  
                    type="file"  
                    [attr.multiple]="field.multiple ? '' : null"  
                    (change)="handleFileInput($event, field.name)"  
                />  
            </mat-form-field>  
  
            <!-- Select Dropdown -->  
            <mat-form-field appearance="outline" *ngIf="field.type === 'select'">  
                <mat-label>{{ field.label }}</mat-label>  
                <mat-select [formControlName]="field.name" [multiple]="field.multiple || false">  
                    <mat-option *ngFor="let option of field.options" [value]="option.value">  
                        {{ option.label }}  
                    </mat-option>  
                </mat-select>  
                <mat-error *ngIf="form.get(field.name)?.hasError('required')">
                    {{ errorMessages[field.name] && errorMessages['required'] || 'Ce champ est requis' }}
                </mat-error>  
            </mat-form-field>  
  
            <!-- Textarea -->  
            <mat-form-field appearance="outline" *ngIf="field.type === 'textarea'">  
                <mat-label>{{ field.label }}</mat-label>  
                <textarea  
                    matInput  
                    [formControlName]="field.name"  
                    [placeholder]="field.placeholder || ''"  
                ></textarea>  
                <mat-error *ngIf="form.get(field.name)?.hasError('required')">
                    {{ errorMessages[field.name] && errorMessages['required'] || 'Ce champ est requis' }}
                </mat-error>  
            </mat-form-field>  
        </div>  
  
        <!-- Action Buttons -->  
        <div class="actions">  
            <button mat-raised-button color="warn" type="button" (click)="handleCancel()">  
                Annuler  
            </button>  
            <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">  
                {{ submitButtonLabel }}  
            </button>  
        </div>  
      </div>  
    </form>  
  </mat-card>
  